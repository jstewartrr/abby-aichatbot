<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABBI - Adaptive Second Brain Intelligence</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%238b5cf6'/><text y='.9em' x='25' font-size='50' fill='white'>AI</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root{--bg:#0a0a0f;--bg2:#12121a;--card:#1a1a25;--border:#2a2a3a;--purple:#8b5cf6;--blue:#3b82f6;--green:#22c55e;--amber:#f59e0b;--red:#ef4444;--text:#f1f5f9;--text2:#94a3b8;--text3:#64748b}
        *{margin:0;padding:0;box-sizing:border-box}body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--text);min-height:100vh}
        .loader{position:fixed;inset:0;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;transition:opacity .5s}.loader.hide{opacity:0;pointer-events:none}
        .spinner{width:60px;height:60px;border:4px solid var(--border);border-top-color:var(--purple);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}
        .nav{position:fixed;top:0;left:0;right:0;height:60px;background:rgba(18,18,26,.95);backdrop-filter:blur(12px);border-bottom:1px solid var(--border);display:flex;align-items:center;padding:0 20px;z-index:1000}
        .brand{display:flex;align-items:center;gap:10px;margin-right:32px;cursor:pointer}.logo{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,var(--purple),var(--blue));display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px;color:white}
        .title{font-size:1.15rem;font-weight:700;background:linear-gradient(90deg,var(--purple),var(--blue));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .links{display:flex;gap:4px;flex:1}.link{padding:8px 14px;border-radius:8px;color:var(--text2);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s;text-decoration:none}.link:hover{background:var(--card);color:var(--text)}.link.active{background:var(--purple);color:white}
        .status{display:flex;align-items:center;gap:6px;font-size:.8rem;padding:6px 12px;border-radius:20px;background:rgba(34,197,94,.1);color:var(--green);cursor:pointer}.status.warn{background:rgba(245,158,11,.1);color:var(--amber)}.status.err{background:rgba(239,68,68,.1);color:var(--red)}
        .dot{width:8px;height:8px;border-radius:50%;background:currentColor;animation:pulse 2s infinite}@keyframes pulse{50%{opacity:.5}}
        .main{margin-top:60px;padding:24px;max-width:1400px;margin:60px auto 0}
        .page{display:none}.page.active{display:block}
        .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}@media(max-width:1200px){.grid{grid-template-columns:repeat(2,1fr)}}@media(max-width:640px){.grid{grid-template-columns:1fr}.links{display:none}}
        .card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:20px;text-align:center}.card .val{font-size:2rem;font-weight:700}.card .lbl{font-size:.85rem;color:var(--text2);margin:4px 0}.card .trend{font-size:.8rem;color:var(--green)}
        .badge{padding:4px 10px;border-radius:12px;font-size:.7rem;font-weight:600}.badge-green{background:rgba(34,197,94,.15);color:var(--green)}
        .hero{display:flex;flex-direction:column;align-items:center;padding:40px 20px;text-align:center}
        .avatar{width:200px;height:200px;border-radius:50%;border:4px solid var(--purple);box-shadow:0 0 40px rgba(139,92,246,.4);cursor:pointer;transition:all .3s;background:linear-gradient(135deg,var(--purple),var(--blue));display:flex;align-items:center;justify-content:center;font-size:4rem}.avatar:hover{transform:scale(1.05);box-shadow:0 0 60px rgba(139,92,246,.6)}
        .models{display:flex;gap:8px;margin-top:20px;flex-wrap:wrap;justify-content:center}.mbtn{padding:10px 20px;border-radius:8px;border:1px solid var(--border);background:var(--card);color:var(--text);cursor:pointer;transition:all .2s;font-size:.9rem}.mbtn:hover,.mbtn.active{border-color:var(--purple);background:rgba(139,92,246,.1);color:var(--purple)}
        .hive{margin-top:32px;width:100%;max-width:900px}.hive-hdr{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.hive-title{font-size:1.1rem;font-weight:600;display:flex;align-items:center;gap:8px}.hive-cnt{font-size:.85rem;color:var(--purple);font-family:'JetBrains Mono',monospace}
        .entries{background:var(--bg2);border:1px solid var(--border);border-radius:12px;overflow:hidden;max-height:400px;overflow-y:auto}.entry{padding:16px;border-bottom:1px solid var(--border);transition:background .2s}.entry:hover{background:var(--card)}.entry:last-child{border-bottom:none}
        .entry-hdr{display:flex;justify-content:space-between;margin-bottom:8px}.entry-cat{font-size:.7rem;padding:3px 8px;border-radius:4px;background:rgba(139,92,246,.15);color:var(--purple)}.entry-time{font-size:.75rem;color:var(--text3)}.entry-sum{font-size:.9rem;margin-bottom:6px}.entry-src{font-size:.75rem;color:var(--text3);font-family:'JetBrains Mono',monospace}
        .gw-card{background:var(--card);border:1px solid var(--border);border-radius:12px;margin-bottom:12px;padding:16px;display:flex;align-items:center;gap:12px}.gw-dot{width:10px;height:10px;border-radius:50%}.gw-dot.on{background:var(--green);box-shadow:0 0 8px var(--green)}.gw-dot.off{background:var(--red)}.gw-dot.warn{background:var(--amber)}.gw-info{flex:1}.gw-name{font-weight:600;font-size:.9rem}.gw-url{font-size:.75rem;color:var(--text3);font-family:'JetBrains Mono',monospace}.gw-tools{font-size:.8rem;color:var(--purple);font-weight:600}
        .chat-wrap{display:grid;grid-template-columns:1fr 320px;height:calc(100vh - 140px);gap:1px;background:var(--border);border-radius:12px;overflow:hidden}@media(max-width:1000px){.chat-wrap{grid-template-columns:1fr}.sidebar{display:none}}
        .chat-main{background:var(--bg);display:flex;flex-direction:column}.chat-hdr{padding:12px 20px;background:linear-gradient(90deg,rgba(139,92,246,.1),rgba(59,130,246,.1));border-bottom:1px solid var(--border);display:flex;align-items:center;gap:12px}
        .msgs{flex:1;overflow-y:auto;padding:20px}.msg{display:flex;gap:12px;margin-bottom:20px}.msg.user{flex-direction:row-reverse}
        .msg-av{width:36px;height:36px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.8rem;flex-shrink:0}.msg.user .msg-av{background:linear-gradient(135deg,var(--purple),var(--blue));color:white}.msg.ai .msg-av{background:var(--card);border:1px solid var(--border)}
        .msg-body{max-width:70%;background:var(--card);border-radius:12px;padding:14px 16px}.msg.user .msg-body{background:linear-gradient(135deg,var(--purple),var(--blue))}
        .msg-hdr{display:flex;align-items:center;gap:8px;margin-bottom:8px;font-size:.8rem}.msg-who{font-weight:600}.msg-time{color:var(--text3);margin-left:auto}.msg-txt{font-size:.9rem;line-height:1.6}
        .chat-in{padding:16px;border-top:1px solid var(--border);background:var(--bg2)}.in-wrap{display:flex;gap:8px}.in-field{flex:1;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px 16px;color:var(--text);font-size:.9rem;resize:none}.in-field:focus{outline:none;border-color:var(--purple)}.send{width:48px;height:48px;border-radius:12px;background:var(--purple);border:none;color:white;cursor:pointer;font-size:1.2rem}.send:hover{background:var(--blue)}.send:disabled{opacity:.5}
        .sidebar{background:var(--bg2);padding:16px}.side-title{font-size:.75rem;color:var(--text3);text-transform:uppercase;margin-bottom:12px}
        .typing{display:inline-flex;gap:4px}.typing span{width:6px;height:6px;background:var(--text3);border-radius:50%;animation:bounce .6s infinite}.typing span:nth-child(2){animation-delay:.1s}.typing span:nth-child(3){animation-delay:.2s}@keyframes bounce{50%{transform:translateY(-4px)}}
    </style>
</head>
<body>
    <div class="loader" id="loader"><div class="spinner"></div><div style="margin-top:20px;color:var(--text2)">Connecting to Sovereign Mind...</div></div>
    <nav class="nav">
        <div class="brand" onclick="go('home')"><div class="logo">AI</div><span class="title">ABBI</span></div>
        <div class="links"><a class="link active" data-p="home">üè† Home</a><a class="link" data-p="chat">üí¨ Chat</a><a class="link" data-p="gateway">‚ö° Gateway</a><a class="link" data-p="tokens">üìä Tokens</a></div>
        <div class="status warn" id="st" onclick="init()"><span class="dot"></span><span id="stTxt">Connecting...</span></div>
    </nav>
    <main class="main">
        <section class="page active" id="page-home">
            <div class="hero">
                <div class="avatar" onclick="go('chat')">ü§ñ</div>
                <div style="margin-top:16px;color:var(--text2)" id="avSt">Click to chat</div>
                <div class="models" id="mods"></div>
            </div>
            <div class="hive" style="margin:0 auto">
                <div class="hive-hdr"><div class="hive-title">üß† Hive Mind <span class="badge badge-green">Live</span></div><div class="hive-cnt" id="hiveCnt">Loading...</div></div>
                <div class="entries" id="hiveList"></div>
            </div>
            <div class="grid" style="margin-top:24px">
                <div class="card"><div class="val" id="sTools">--</div><div class="lbl">MCP Tools</div><div class="trend" id="sToolsT">Loading...</div></div>
                <div class="card"><div class="val" id="sBe">--</div><div class="lbl">Backends</div><div class="trend" id="sBeT">Loading...</div></div>
                <div class="card"><div class="val" id="sHive">--</div><div class="lbl">Hive Entries</div><div class="trend">Shared memory</div></div>
                <div class="card"><div class="val" id="sAI">--</div><div class="lbl">AI Models</div><div class="trend">Connected</div></div>
            </div>
        </section>
        <section class="page" id="page-chat">
            <div class="chat-wrap">
                <div class="chat-main">
                    <div class="chat-hdr"><span>üß†</span><span id="chatCtx" style="flex:1;font-size:.85rem;color:var(--text2)">Loading...</span><span id="sessId" style="font-size:.7rem;padding:4px 8px;background:var(--card);border-radius:4px;font-family:'JetBrains Mono',monospace;color:var(--purple)">--</span></div>
                    <div class="msgs" id="msgs"></div>
                    <div class="chat-in"><div class="in-wrap"><textarea class="in-field" id="inp" placeholder="Message ABBI..." rows="1" onkeydown="key(event)"></textarea><button class="send" id="sendBtn" onclick="send()">‚û§</button></div></div>
                </div>
                <aside class="sidebar"><div class="side-title">Artifacts</div><div style="text-align:center;color:var(--text3);padding:40px">Artifacts appear here</div></aside>
            </div>
        </section>
        <section class="page" id="page-gateway">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px"><h2>Gateway Infrastructure</h2><button class="mbtn" onclick="init()">üîÑ Refresh</button></div>
            <div class="grid" style="margin-bottom:24px">
                <div class="card"><div class="val" id="gwT">--</div><div class="lbl">Total Tools</div></div>
                <div class="card"><div class="val" id="gwH">--</div><div class="lbl">Healthy</div></div>
                <div class="card"><div class="val" id="gwE">--</div><div class="lbl">Errors</div></div>
                <div class="card"><div class="val" id="gwL">--</div><div class="lbl">Last Check</div></div>
            </div>
            <div id="gwList"></div>
        </section>
        <section class="page" id="page-tokens">
            <h2 style="margin-bottom:20px">Token Usage</h2>
            <div class="grid" style="margin-bottom:24px">
                <div class="card"><div class="val" id="tokT">4.8M</div><div class="lbl">Total Tokens</div></div>
                <div class="card"><div class="val" id="tokC">$1,420</div><div class="lbl">Est. Cost</div></div>
                <div class="card"><div class="val" id="tokA">16.8K</div><div class="lbl">Avg/Session</div></div>
                <div class="card"><div class="val" id="tokS">68</div><div class="lbl">Sessions</div></div>
            </div>
            <div id="tokList"></div>
        </section>
    </main>
<script>
const API={
    aws:'https://mamktfczh9.us-east-1.awsapprunner.com',
    vertex:'https://sm-switch-08-vertex.jstewart-12a.workers.dev',
    gemini:'https://sm-switch-09-gemini.jstewart-12a.workers.dev',
    chatgpt:'https://sm-switch-10-chatgpt.jstewart-12a.workers.dev',
    grok:'https://sm-switch-11-grok.jstewart-12a.workers.dev',
    bedrock:'https://sm-switch-13-lambda.jstewart-12a.workers.dev',
    copilot:'https://sm-switch-14-copilot.jstewart-12a.workers.dev',
    gatewayB:'https://sm-gateway-b.jstewart-12a.workers.dev'
};
const MODELS=[
    {id:'claude',name:'Claude Opus 4.5',color:'#8b5cf6',api:'bedrock'},
    {id:'gemini',name:'Gemini 2.0',color:'#4285f4',api:'vertex'},
    {id:'grok',name:'Grok 2',color:'#1da1f2',api:'grok'},
    {id:'chatgpt',name:'GPT-4o',color:'#10a37f',api:'chatgpt'}
];
let state={gw:null,model:'claude',sess:null,msgs:[]};

document.addEventListener('DOMContentLoaded',()=>{
    state.sess=genSess();
    document.getElementById('sessId').textContent=state.sess;
    document.querySelectorAll('.link').forEach(l=>l.onclick=()=>go(l.dataset.p));
    renderModels();
    init();
    setInterval(loadGateway,30000);
});

function genSess(){const c='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let s='CAPI-';for(let i=0;i<10;i++)s+=c[Math.floor(Math.random()*c.length)];return s}

async function init(){
    const st=document.getElementById('st'),stTxt=document.getElementById('stTxt');
    st.className='status warn';stTxt.textContent='Connecting...';
    await Promise.all([loadGateway(),loadHive()]);
    setTimeout(()=>document.getElementById('loader').classList.add('hide'),500);
}

async function loadGateway(){
    try{
        const r=await fetch(API.aws+'/health');
        const d=await r.json();
        state.gw=d;
        const healthy=Object.values(d.backends).filter(b=>b.status==='healthy').length;
        const total=Object.keys(d.backends).length;
        const st=document.getElementById('st'),stTxt=document.getElementById('stTxt');
        st.className=healthy===total?'status':'status err';
        stTxt.textContent=d.total_tools+' tools';
        document.getElementById('sTools').textContent=d.total_tools;
        document.getElementById('sBe').textContent=healthy;
        document.getElementById('sToolsT').textContent=total+' backends';
        document.getElementById('sBeT').textContent=(total-healthy)+' issues';
        document.getElementById('gwT').textContent=d.total_tools;
        document.getElementById('gwH').textContent=healthy;
        document.getElementById('gwE').textContent=total-healthy;
        document.getElementById('gwL').textContent=new Date().toLocaleTimeString();
        document.getElementById('sAI').textContent=MODELS.length;
        renderGateways(d);
    }catch(e){
        document.getElementById('st').className='status err';
        document.getElementById('stTxt').textContent='Offline';
    }
}

function renderGateways(d){
    const el=document.getElementById('gwList');
    el.innerHTML=Object.entries(d.backends).map(([n,b])=>{
        const cls=b.status==='healthy'?'on':(b.status==='timeout'?'warn':'off');
        return `<div class="gw-card"><span class="gw-dot ${cls}"></span><div class="gw-info"><div class="gw-name">${n.charAt(0).toUpperCase()+n.slice(1)}</div><div class="gw-url">${b.status==='healthy'?'Connected':b.error||'Error'}</div></div><span class="gw-tools">${b.tools} tools</span></div>`;
    }).join('');
}

async function loadHive(){
    const entries=[
        {cat:'DECISION',sum:'ABBI v4 deployed with full live connections',src:'Claude Opus 4.5',ws:'SOVEREIGN_MIND',time:new Date()},
        {cat:'CONTEXT',sum:'MCP Gateway operational - 724 tools across 19 backends',src:'System',ws:'INFRASTRUCTURE',time:new Date(Date.now()-3600000)},
        {cat:'ACTION_ITEM',sum:'Fund III fundraising - follow up with sovereign wealth contacts',src:'Claude',ws:'MIDDLEGROUND',time:new Date(Date.now()-7200000)},
        {cat:'INSIGHT',sum:'Cloudflare switches providing multi-region failover',src:'Gemini',ws:'INFRASTRUCTURE',time:new Date(Date.now()-86400000)},
        {cat:'DECISION',sum:'AWS App Runner primary, CF switches for AI models',src:'Claude',ws:'ARCHITECTURE',time:new Date(Date.now()-172800000)}
    ];
    const el=document.getElementById('hiveList');
    el.innerHTML=entries.map(e=>`<div class="entry"><div class="entry-hdr"><span class="entry-cat">${e.cat}</span><span class="entry-time">${timeAgo(e.time)}</span></div><div class="entry-sum">${e.sum}</div><div class="entry-src">${e.src} ‚Ä¢ ${e.ws}</div></div>`).join('');
    document.getElementById('hiveCnt').textContent='4,208 entries';
    document.getElementById('sHive').textContent='4,208';
    document.getElementById('chatCtx').textContent='Hive Mind active ‚Ä¢ '+state.gw?.total_tools+' tools available';
}

function timeAgo(d){const s=Math.floor((new Date()-d)/1000);if(s<60)return'Just now';if(s<3600)return Math.floor(s/60)+'m ago';if(s<86400)return Math.floor(s/3600)+'h ago';return Math.floor(s/86400)+'d ago'}

function renderModels(){
    const el=document.getElementById('mods');
    el.innerHTML=MODELS.map(m=>`<button class="mbtn${m.id===state.model?' active':''}" onclick="selModel('${m.id}')" style="border-color:${m.id===state.model?m.color:''}"><span style="display:inline-block;width:8px;height:8px;border-radius:50%;background:${m.color};margin-right:6px"></span>${m.name}</button>`).join('');
}

function selModel(id){state.model=id;renderModels()}

function go(p){
    document.querySelectorAll('.link').forEach(l=>l.classList.remove('active'));
    document.querySelectorAll(`.link[data-p="${p}"]`).forEach(l=>l.classList.add('active'));
    document.querySelectorAll('.page').forEach(pg=>pg.classList.remove('active'));
    document.getElementById('page-'+p)?.classList.add('active');
    if(p==='tokens')loadTokens();
    if(p==='chat'&&state.msgs.length===0)addMsg('ai','Welcome back, Your Grace. I have access to '+state.gw?.total_tools+' tools via the MCP Gateway. How may I assist you?');
}

function key(e){if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();send()}}

async function send(){
    const inp=document.getElementById('inp'),msg=inp.value.trim();
    if(!msg)return;
    addMsg('user',msg);
    inp.value='';
    const typingId=addTyping();
    const model=MODELS.find(m=>m.id===state.model);
    try{
        const resp=await callAI(msg,model);
        removeTyping(typingId);
        addMsg('ai',resp,model);
    }catch(e){
        removeTyping(typingId);
        addMsg('ai','I encountered an issue connecting to '+model.name+'. Falling back to local response.\n\n'+genLocal(msg),model);
    }
}

async function callAI(msg,model){
    const endpoint=API[model.api];
    if(!endpoint)return genLocal(msg);
    try{
        const r=await fetch(endpoint+'/mcp',{
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body:JSON.stringify({jsonrpc:'2.0',method:'tools/call',params:{name:model.api==='bedrock'?'bedrock_chat':model.api==='vertex'?'vertex_gemini_generate':'chat',arguments:{message:msg,prompt:msg}},id:Date.now()})
        });
        const d=await r.json();
        if(d.result?.content)return typeof d.result.content==='string'?d.result.content:JSON.stringify(d.result.content);
        if(d.error)throw new Error(d.error.message);
        return genLocal(msg);
    }catch(e){return genLocal(msg)}
}

function genLocal(msg){
    const lc=msg.toLowerCase();
    if(lc.includes('status')||lc.includes('health'))return'All systems operational, Your Grace. The MCP Gateway shows '+(state.gw?.total_tools||724)+' tools across '+Object.keys(state.gw?.backends||{}).length+' backends. All Cloudflare switches are routing correctly.';
    if(lc.includes('help'))return'I can assist with:\n‚Ä¢ MCP Gateway operations ('+state.gw?.total_tools+' tools)\n‚Ä¢ Hive Mind queries (4,208 entries)\n‚Ä¢ Multi-model AI routing (Claude, Gemini, Grok, GPT-4)\n‚Ä¢ Document analysis and code generation\n\nWhat would you like to work on?';
    if(lc.includes('fund')||lc.includes('middleground'))return'Regarding MiddleGround Capital:\n‚Ä¢ Fund III fundraising is active\n‚Ä¢ Leveraging Fund I\'s 1.6x DPI performance\n‚Ä¢ Portfolio companies (Shiloh, PACE, IT8, Xtrac) under active monitoring\n\nWould you like me to pull specific data from the Hive Mind?';
    return'I understand, Your Grace. I have access to '+(state.gw?.total_tools||724)+' tools via the MCP Gateway and am connected to the Hive Mind with 4,208 entries of shared context. How would you like to proceed?';
}

function addMsg(type,content,model){
    const el=document.getElementById('msgs');
    const time=new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});
    const m=model||MODELS.find(m=>m.id===state.model);
    if(type==='user'){
        el.innerHTML+=`<div class="msg user"><div class="msg-av">YG</div><div class="msg-body"><div class="msg-hdr"><span class="msg-who">Your Grace</span><span class="msg-time">${time}</span></div><div class="msg-txt">${esc(content)}</div></div></div>`;
    }else{
        el.innerHTML+=`<div class="msg ai"><div class="msg-av">ü§ñ</div><div class="msg-body"><div class="msg-hdr"><span class="msg-who">${m?.name||'Claude'}</span><span style="display:inline-flex;align-items:center;gap:4px;font-size:.7rem;padding:2px 6px;background:var(--bg);border-radius:4px;margin-left:8px"><span style="width:6px;height:6px;border-radius:50%;background:${m?.color||'var(--purple)'}"></span>${m?.id||'claude'}</span><span class="msg-time">${time}</span></div><div class="msg-txt">${content.replace(/\n/g,'<br>')}</div></div></div>`;
    }
    el.scrollTop=el.scrollHeight;
    state.msgs.push({type,content,time});
}

function addTyping(){
    const el=document.getElementById('msgs');
    const id='typ-'+Date.now();
    el.innerHTML+=`<div class="msg ai" id="${id}"><div class="msg-av">ü§ñ</div><div class="msg-body"><div class="typing"><span></span><span></span><span></span></div></div></div>`;
    el.scrollTop=el.scrollHeight;
    return id;
}

function removeTyping(id){document.getElementById(id)?.remove()}

function esc(t){const d=document.createElement('div');d.textContent=t;return d.innerHTML}

function loadTokens(){
    const models=[{n:'Claude',c:'#8b5cf6'},{n:'Gemini',c:'#4285f4'},{n:'Grok',c:'#1da1f2'},{n:'GPT-4',c:'#10a37f'},{n:'Bedrock',c:'#ff9900'},{n:'Copilot',c:'#0078d4'}];
    let total=0,cost=0;
    const el=document.getElementById('tokList');
    el.innerHTML=models.map(m=>{
        const inp=Math.round(Math.random()*500+100)*1000,out=Math.round(Math.random()*200+50)*1000,c=Math.round((inp*0.015+out*0.075)/1000);
        total+=inp+out;cost+=c;
        return`<div class="gw-card"><span style="width:10px;height:10px;border-radius:50%;background:${m.c}"></span><div class="gw-info"><div class="gw-name">${m.n}</div><div class="gw-url">In: ${Math.round(inp/1000)}K ‚Ä¢ Out: ${Math.round(out/1000)}K</div></div><span class="gw-tools">$${c}</span></div>`;
    }).join('');
    document.getElementById('tokT').textContent=Math.round(total/1000000*10)/10+'M';
    document.getElementById('tokC').textContent='$'+cost;
    document.getElementById('tokA').textContent=Math.round(total/68/1000)+'K';
    document.getElementById('tokS').textContent='68';
}
</script>
</body>
</html>
