<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0A0F1C">
    <title>ABBI-AI.com</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root{--primary-900:#0A0F1C;--primary-800:#151B2E;--primary-700:#1E2642;--accent-primary:#4F8CFF;--accent-secondary:#A855F7;--claude-color:#D97706;--gpt-color:#10B981;--gemini-color:#6366F1;--grok-color:#EF4444;--deepseek-color:#3B82F6;--text-primary:#F8FAFC;--text-secondary:#94A3B8;--text-muted:#64748B;--border-subtle:rgba(148,163,184,0.1);--border-accent:rgba(79,140,255,0.3);--safe-bottom:env(safe-area-inset-bottom,0px);--safe-top:env(safe-area-inset-top,0px)}
        *{margin:0;padding:0;box-sizing:border-box}
        html,body{height:100%;overflow:hidden;touch-action:manipulation}
        body{font-family:'Inter',sans-serif;background:var(--primary-900);color:var(--text-primary);-webkit-font-smoothing:antialiased}
        .app-container{display:grid;grid-template-columns:260px 1fr 380px;grid-template-rows:60px 1fr;height:100dvh;gap:0}
        @media(max-width:1200px){.app-container{grid-template-columns:260px 1fr}.artifact-panel{display:none}}
        @media(max-width:768px){.app-container{grid-template-columns:1fr;grid-template-rows:56px 1fr}.sidebar{position:fixed;left:0;top:0;bottom:0;width:280px;z-index:1000;transform:translateX(-100%);transition:transform .3s ease}.sidebar.open{transform:translateX(0)}.sidebar-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:999;opacity:0;pointer-events:none;transition:opacity .3s ease}.sidebar-overlay.open{opacity:1;pointer-events:auto}.header{padding:0 12px}.header-nav{display:none}.menu-btn{display:flex!important}.model-selector{padding:6px 10px}.model-name{display:none}.chat-messages{padding:12px}.input-area{padding:12px;padding-bottom:calc(12px + var(--safe-bottom))}.input-options{display:none}.message{gap:10px}.message-avatar{width:32px;height:32px;font-size:12px}.message-text{font-size:14px;padding:12px 14px!important}.message-actions{flex-wrap:wrap;gap:6px}.action-btn{padding:6px 10px;font-size:11px}}
        .header{grid-column:1/-1;background:var(--primary-800);border-bottom:1px solid var(--border-subtle);display:flex;align-items:center;justify-content:space-between;padding:0 24px;padding-top:var(--safe-top)}
        .menu-btn{display:none;width:40px;height:40px;border-radius:10px;background:transparent;border:none;color:var(--text-primary);cursor:pointer;align-items:center;justify-content:center;font-size:20px}
        .logo{display:flex;align-items:center;gap:12px}
        .logo-icon{width:36px;height:36px;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px}
        .logo-text{font-family:'Plus Jakarta Sans',sans-serif;font-weight:700;font-size:20px;background:linear-gradient(135deg,var(--text-primary),var(--text-secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .header-nav{display:flex;align-items:center;gap:8px}
        .nav-btn{background:transparent;border:none;color:var(--text-secondary);padding:10px 16px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;-webkit-tap-highlight-color:transparent}
        .nav-btn.active{background:var(--primary-700);color:var(--accent-primary)}
        .header-actions{display:flex;align-items:center;gap:16px}
        .model-selector{display:flex;align-items:center;gap:10px;background:var(--primary-700);padding:8px 16px;border-radius:10px;cursor:pointer;border:1px solid var(--border-subtle)}
        .model-indicator{width:10px;height:10px;border-radius:50%;box-shadow:0 0 12px currentColor;flex-shrink:0}
        .model-name{font-weight:600;font-size:14px}
        .model-chevron{color:var(--text-muted);font-size:12px}
        .voice-btn{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));border:none;color:white;cursor:pointer;display:flex;align-items:center;justify-content:center}
        .user-avatar{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--accent-primary),var(--gemini-color));display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px}
        .sidebar{background:var(--primary-800);border-right:1px solid var(--border-subtle);padding:16px;overflow-y:auto;display:flex;flex-direction:column;gap:24px;-webkit-overflow-scrolling:touch}
        .sidebar-section{display:flex;flex-direction:column;gap:8px}
        .sidebar-title{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:var(--text-muted);padding:0 12px}
        .new-chat-btn{display:flex;align-items:center;gap:10px;padding:12px 16px;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));border:none;border-radius:10px;color:white;font-weight:600;font-size:14px;cursor:pointer}
        .chat-item{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:8px;cursor:pointer}
        .chat-item.active{background:var(--primary-700);border-left:2px solid var(--accent-primary)}
        .chat-icon{width:8px;height:8px;border-radius:50%;flex-shrink:0}
        .chat-title{font-size:13px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        .space-item{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:8px;cursor:pointer}
        .space-icon{font-size:16px}
        .space-name{font-size:13px;color:var(--text-secondary)}
        .model-list-item{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:8px;cursor:pointer}
        .model-list-item .model-indicator{width:8px;height:8px}
        .model-list-name{font-size:13px;color:var(--text-secondary)}
        .chat-area{display:flex;flex-direction:column;background:var(--primary-900);overflow:hidden}
        .chat-messages{flex:1;overflow-y:auto;padding:24px;display:flex;flex-direction:column;gap:24px;-webkit-overflow-scrolling:touch}
        .message{display:flex;gap:16px;max-width:100%}
        .message-avatar{width:36px;height:36px;border-radius:10px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:14px}
        .message.user .message-avatar{background:linear-gradient(135deg,var(--accent-primary),var(--gemini-color))}
        .message.ai .message-avatar{background:var(--primary-700);border:1px solid var(--border-subtle)}
        .message-content{flex:1;display:flex;flex-direction:column;gap:8px;min-width:0}
        .message-header{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
        .message-author{font-weight:600;font-size:14px}
        .message-model{display:flex;align-items:center;gap:6px;font-size:12px;color:var(--text-muted)}
        .message-model .model-indicator{width:6px;height:6px}
        .message-time{font-size:12px;color:var(--text-muted);margin-left:auto}
        .message-text{font-size:15px;line-height:1.7;color:var(--text-secondary);word-wrap:break-word}
        .message.ai .message-text{background:var(--primary-800);padding:16px 20px;border-radius:12px;border:1px solid var(--border-subtle)}
        .message-actions{display:flex;align-items:center;gap:8px;margin-top:8px}
        .action-btn{display:flex;align-items:center;gap:6px;padding:6px 12px;background:transparent;border:1px solid var(--border-subtle);border-radius:6px;color:var(--text-muted);font-size:12px;cursor:pointer}
        .compare-badge{background:linear-gradient(135deg,rgba(79,140,255,.1),rgba(168,85,247,.1));border-color:var(--border-accent);color:var(--accent-primary)}
        .context-panel{background:linear-gradient(135deg,rgba(79,140,255,.1),rgba(168,85,247,.1));border:1px solid var(--border-accent);border-radius:12px;padding:16px;margin-bottom:20px}
        .context-header{display:flex;align-items:center;gap:10px;margin-bottom:12px}
        .context-icon{font-size:18px}
        .context-title{font-size:14px;font-weight:600;color:var(--accent-primary)}
        .context-items{display:flex;flex-direction:column;gap:8px}
        .context-item{display:flex;align-items:center;gap:8px;font-size:13px;color:var(--text-secondary)}
        .context-item::before{content:'‚îú‚îÄ';color:var(--text-muted);font-family:monospace}
        .context-item:last-child::before{content:'‚îî‚îÄ'}
        .input-area{padding:20px 24px;padding-bottom:calc(20px + var(--safe-bottom));border-top:1px solid var(--border-subtle);background:var(--primary-800)}
        .input-container{display:flex;flex-direction:column;gap:12px}
        .input-wrapper{display:flex;align-items:flex-end;gap:12px;background:var(--primary-900);border:1px solid var(--border-subtle);border-radius:16px;padding:12px 16px}
        .input-wrapper:focus-within{border-color:var(--accent-primary)}
        .input-field{flex:1;background:transparent;border:none;color:var(--text-primary);font-size:16px;font-family:'Inter',sans-serif;resize:none;min-height:24px;max-height:120px;outline:none;-webkit-appearance:none}
        .input-field::placeholder{color:var(--text-muted)}
        .input-actions{display:flex;align-items:center;gap:8px}
        .input-action-btn{width:40px;height:40px;border-radius:10px;background:transparent;border:none;color:var(--text-muted);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px}
        .send-btn{width:44px;height:44px;border-radius:12px;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));border:none;color:white;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px}
        .send-btn:disabled{opacity:.5}
        .artifact-panel{background:var(--primary-800);border-left:1px solid var(--border-subtle);display:flex;flex-direction:column}
        .artifact-header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--border-subtle)}
        .artifact-title{font-family:'Plus Jakarta Sans',sans-serif;font-weight:600;font-size:15px}
        .artifact-content{flex:1;overflow-y:auto;padding:20px}
        .stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
        .stat-card{background:var(--primary-900);border:1px solid var(--border-subtle);border-radius:10px;padding:14px}
        .stat-value{font-size:1.5rem;font-weight:700;color:var(--accent-primary)}
        .stat-label{font-size:12px;color:var(--text-muted);margin-top:4px}
        .typing-indicator{display:flex;align-items:center;gap:8px;padding:12px 16px;background:var(--primary-800);border-radius:12px;width:fit-content}
        .typing-dots{display:flex;gap:4px}
        .typing-dot{width:8px;height:8px;border-radius:50%;animation:typing 1.4s infinite}
        .typing-dot:nth-child(2){animation-delay:.2s}
        .typing-dot:nth-child(3){animation-delay:.4s}
        @keyframes typing{0%,60%,100%{transform:translateY(0);opacity:.5}30%{transform:translateY(-6px);opacity:1}}
        .model-picker{position:fixed;inset:0;z-index:2000;display:none;align-items:flex-end;justify-content:center}
        .model-picker.open{display:flex}
        .model-picker-overlay{position:absolute;inset:0;background:rgba(0,0,0,.6)}
        .model-picker-content{position:relative;background:var(--primary-800);border-radius:20px 20px 0 0;width:100%;max-width:400px;max-height:70vh;overflow-y:auto;padding:20px;padding-bottom:calc(20px + var(--safe-bottom));animation:slideUp .3s ease}
        @keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
        .model-picker-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
        .model-picker-title{font-size:18px;font-weight:600}
        .model-picker-close{width:32px;height:32px;border-radius:50%;background:var(--primary-700);border:none;color:var(--text-primary);font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center}
        .model-picker-item{display:flex;align-items:center;gap:12px;padding:14px;border-radius:12px;cursor:pointer}
        .model-picker-item.selected{background:var(--primary-700);border:1px solid var(--border-accent)}
        .model-picker-dot{width:12px;height:12px;border-radius:50%}
        .model-picker-name{font-size:15px;font-weight:500}
        .model-picker-desc{font-size:12px;color:var(--text-muted);margin-top:2px}
        @media(max-width:768px){::-webkit-scrollbar{width:0;display:none}}
    </style>
</head>
<body>
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>
    <div class="app-container">
        <header class="header">
            <div style="display:flex;align-items:center;gap:12px">
                <button class="menu-btn" onclick="toggleSidebar()">‚ò∞</button>
                <div class="logo"><div class="logo-icon">AI</div><span class="logo-text">ABBI-AI</span></div>
            </div>
            <nav class="header-nav">
                <button class="nav-btn active">Chat</button>
                <button class="nav-btn">Research</button>
                <button class="nav-btn">Spaces</button>
            </nav>
            <div class="header-actions">
                <div class="model-selector" onclick="openModelPicker()">
                    <div class="model-indicator" id="modelDot" style="background:var(--claude-color)"></div>
                    <span class="model-name" id="modelLabel">Claude Opus 4.5</span>
                    <span class="model-chevron">‚ñæ</span>
                </div>
                <button class="voice-btn">üéôÔ∏è</button>
                <div class="user-avatar">YG</div>
            </div>
        </header>
        <aside class="sidebar" id="sidebar">
            <button class="new-chat-btn" onclick="newChat();toggleSidebar()"><span>‚ú®</span><span>New Chat</span></button>
            <div class="sidebar-section">
                <div class="sidebar-title">Recent Chats</div>
                <div class="chat-item active" onclick="toggleSidebar()"><div class="chat-icon" style="background:var(--claude-color)"></div><span class="chat-title">MCP Gateway Architecture</span></div>
                <div class="chat-item" onclick="toggleSidebar()"><div class="chat-icon" style="background:var(--gpt-color)"></div><span class="chat-title">Fund III Pitch Deck</span></div>
            </div>
            <div class="sidebar-section">
                <div class="sidebar-title">Spaces</div>
                <div class="space-item" onclick="toggleSidebar()"><span class="space-icon">üß†</span><span class="space-name">Sovereign Mind</span></div>
                <div class="space-item" onclick="toggleSidebar()"><span class="space-icon">üíº</span><span class="space-name">MiddleGround Capital</span></div>
            </div>
            <div class="sidebar-section">
                <div class="sidebar-title">Models</div>
                <div class="model-list-item" onclick="selectModel('claude');toggleSidebar()"><div class="model-indicator" style="background:var(--claude-color)"></div><span class="model-list-name">Claude Opus 4.5 ‚≠ê</span></div>
                <div class="model-list-item" onclick="selectModel('gemini');toggleSidebar()"><div class="model-indicator" style="background:var(--gemini-color)"></div><span class="model-list-name">Gemini 2.0</span></div>
                <div class="model-list-item" onclick="selectModel('gpt');toggleSidebar()"><div class="model-indicator" style="background:var(--gpt-color)"></div><span class="model-list-name">GPT-4o</span></div>
            </div>
        </aside>
        <main class="chat-area">
            <div class="chat-messages" id="messages">
                <div class="context-panel">
                    <div class="context-header"><span class="context-icon">üß†</span><span class="context-title">Hive Mind Active</span></div>
                    <div class="context-items">
                        <div class="context-item">MCP Gateway: <span id="toolCount">200+</span> tools</div>
                        <div class="context-item">Session: <span id="sessionId">--</span></div>
                    </div>
                </div>
            </div>
            <div class="input-area">
                <div class="input-container">
                    <div class="input-wrapper">
                        <textarea class="input-field" id="inputField" placeholder="Message ABBI..." rows="1" onkeydown="handleKey(event)"></textarea>
                        <div class="input-actions">
                            <button class="input-action-btn">üìé</button>
                            <button class="input-action-btn">üé§</button>
                            <button class="send-btn" id="sendBtn" onclick="sendMessage()">‚û§</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <aside class="artifact-panel">
            <div class="artifact-header"><span class="artifact-title">‚ö° Gateway</span></div>
            <div class="artifact-content">
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-value">200+</div><div class="stat-label">Tools</div></div>
                    <div class="stat-card"><div class="stat-value">6</div><div class="stat-label">Models</div></div>
                </div>
            </div>
        </aside>
    </div>
    <div class="model-picker" id="modelPicker">
        <div class="model-picker-overlay" onclick="closeModelPicker()"></div>
        <div class="model-picker-content">
            <div class="model-picker-header"><span class="model-picker-title">Select Model</span><button class="model-picker-close" onclick="closeModelPicker()">√ó</button></div>
            <div class="model-picker-item selected" onclick="selectModelFromPicker('claude')"><div class="model-picker-dot" style="background:var(--claude-color)"></div><div><div class="model-picker-name">Claude Opus 4.5 ‚≠ê</div><div class="model-picker-desc">Most capable</div></div></div>
            <div class="model-picker-item" onclick="selectModelFromPicker('gemini')"><div class="model-picker-dot" style="background:var(--gemini-color)"></div><div><div class="model-picker-name">Gemini 2.0</div><div class="model-picker-desc">Fast multimodal</div></div></div>
            <div class="model-picker-item" onclick="selectModelFromPicker('gpt')"><div class="model-picker-dot" style="background:var(--gpt-color)"></div><div><div class="model-picker-name">GPT-4o</div><div class="model-picker-desc">Versatile</div></div></div>
            <div class="model-picker-item" onclick="selectModelFromPicker('grok')"><div class="model-picker-dot" style="background:var(--grok-color)"></div><div><div class="model-picker-name">Grok 2</div><div class="model-picker-desc">Real-time</div></div></div>
            <div class="model-picker-item" onclick="selectModelFromPicker('deepseek')"><div class="model-picker-dot" style="background:var(--deepseek-color)"></div><div><div class="model-picker-name">DeepSeek R1</div><div class="model-picker-desc">Reasoning</div></div></div>
        </div>
    </div>
<script>
const MODELS={claude:{name:'Claude Opus 4.5',color:'var(--claude-color)'},gemini:{name:'Gemini 2.0',color:'var(--gemini-color)'},gpt:{name:'GPT-4o',color:'var(--gpt-color)'},grok:{name:'Grok 2',color:'var(--grok-color)'},deepseek:{name:'DeepSeek R1',color:'var(--deepseek-color)'}};
let state={model:'claude',sessionId:'ABBI-'+Math.random().toString(36).substr(2,8).toUpperCase(),history:[]};
document.addEventListener('DOMContentLoaded',()=>{document.getElementById('sessionId').textContent=state.sessionId;document.getElementById('inputField').addEventListener('input',function(){this.style.height='auto';this.style.height=Math.min(this.scrollHeight,120)+'px'});addWelcome()});
function toggleSidebar(){document.getElementById('sidebar').classList.toggle('open');document.getElementById('sidebarOverlay').classList.toggle('open')}
function openModelPicker(){if(window.innerWidth<=768)document.getElementById('modelPicker').classList.add('open')}
function closeModelPicker(){document.getElementById('modelPicker').classList.remove('open')}
function selectModelFromPicker(m){selectModel(m);document.querySelectorAll('.model-picker-item').forEach(i=>i.classList.toggle('selected',i.querySelector('.model-picker-name').textContent.includes(MODELS[m].name)));closeModelPicker()}
function selectModel(m){state.model=m;document.getElementById('modelDot').style.background=MODELS[m].color;document.getElementById('modelLabel').textContent=MODELS[m].name}
function addWelcome(){addMessage('ai','Welcome back, Your Grace. I\'m ABBI.\n\nI have access to <strong>200+ tools</strong> via the MCP Gateway.\n\nHow may I assist you today?')}
function addMessage(type,text){const msgs=document.getElementById('messages');const time=new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});const m=MODELS[state.model];msgs.insertAdjacentHTML('beforeend','<div class="message '+type+'"><div class="message-avatar">'+(type==='user'?'YG':'ü§ñ')+'</div><div class="message-content"><div class="message-header"><span class="message-author">'+(type==='user'?'Your Grace':'ABBI')+'</span>'+(type==='ai'?'<div class="message-model"><div class="model-indicator" style="background:'+m.color+'"></div><span>'+m.name+'</span></div>':'')+'<span class="message-time">'+time+'</span></div><div class="message-text">'+text.replace(/\n/g,'<br>')+'</div>'+(type==='ai'?'<div class="message-actions"><button class="action-btn" onclick="copyMsg(this)">üìã Copy</button><button class="action-btn compare-badge">‚ö° Compare</button></div>':'')+'</div></div>');msgs.scrollTop=msgs.scrollHeight;state.history.push({role:type==='user'?'user':'assistant',content:text})}
function handleKey(e){if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage()}}
async function sendMessage(){const input=document.getElementById('inputField');const text=input.value.trim();if(!text)return;addMessage('user',text);input.value='';input.style.height='auto';document.getElementById('sendBtn').disabled=true;const msgs=document.getElementById('messages');const typingId='t-'+Date.now();msgs.insertAdjacentHTML('beforeend','<div class="message ai" id="'+typingId+'"><div class="message-avatar">ü§ñ</div><div class="typing-indicator"><div class="typing-dots"><div class="typing-dot" style="background:'+MODELS[state.model].color+'"></div><div class="typing-dot" style="background:'+MODELS[state.model].color+'"></div><div class="typing-dot" style="background:'+MODELS[state.model].color+'"></div></div></div></div>');msgs.scrollTop=msgs.scrollHeight;try{const r=await fetch('/api/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({model:'claude-sonnet-4-20250514',max_tokens:4096,system:'You are ABBI. Address user as "Your Grace".',messages:state.history.slice(-10)})});const d=await r.json();document.getElementById(typingId)?.remove();addMessage('ai',d.content?.[0]?.text||'I processed your request.')}catch(e){document.getElementById(typingId)?.remove();addMessage('ai','Error: '+e.message)}document.getElementById('sendBtn').disabled=false}
function newChat(){state.history=[];state.sessionId='ABBI-'+Math.random().toString(36).substr(2,8).toUpperCase();document.getElementById('sessionId').textContent=state.sessionId;document.getElementById('messages').innerHTML='<div class="context-panel"><div class="context-header"><span class="context-icon">üß†</span><span class="context-title">Hive Mind Active</span></div><div class="context-items"><div class="context-item">MCP Gateway: <span id="toolCount">200+</span> tools</div><div class="context-item">Session: <span id="sessionId">'+state.sessionId+'</span></div></div></div>';addWelcome()}
function copyMsg(b){navigator.clipboard.writeText(b.closest('.message-content').querySelector('.message-text').innerText);b.innerHTML='‚úì Copied';setTimeout(()=>b.innerHTML='üìã Copy',2000)}
</script>
</body>
</html>